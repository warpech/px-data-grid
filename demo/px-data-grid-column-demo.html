<!-- Common demo imports -->
<link rel="import" href="../../px-demo/px-demo-header.html" />
<link rel="import" href="../../px-demo/px-demo-api-viewer.html" />
<link rel="import" href="../../px-demo/px-demo-footer.html" />
<link rel="import" href="../../px-demo/px-demo-configs.html" />
<link rel="import" href="../../px-demo/px-demo-props.html" />
<link rel="import" href="../../px-demo/px-demo-interactive.html" />
<link rel="import" href="../../px-demo/px-demo-component-snippet.html" />
<link rel="import" href="../../px-demo/px-demo-code-editor.html" />

<!-- Imports for this component -->
<link rel="import" href="../css/px-demo-styles.html" />
<link rel="import" href="../px-data-grid.html" />

<!-- Demo DOM module -->
<dom-module id="px-data-grid-column-demo">
  <template>
    <custom-style>
      <style include="px-demo-styles" is="custom-style"></style>
    </custom-style>

    <!-- Header -->
    <px-demo-header
        module-name='px-data-grid columns="[{}, {}, ...]"'
        description="The optional columns property provides the ability to override and customize the behavior of individual columns."
        mobile desktop tablet>
    </px-demo-header>

    <!-- Interactive -->
    <px-demo-interactive>
      <!-- Configs -->
      <px-demo-configs slot="px-demo-configs" configs="[[configs]]" props="{{props}}" chosen-config="{{chosenConfig}}"></px-demo-configs>

      <!-- Props -->
      <px-demo-props slot="px-demo-props" props="{{props}}" config="[[chosenConfig]]"></px-demo-props>

      <!-- Code Editor -->
      <px-demo-code-editor slot="px-demo-code-editor" props="{{props}}" config="[[chosenConfig]]"></px-demo-code-editor>

      <!-- Component ---------------------------------------------------------->
      <px-demo-component slot="px-demo-component">
        <px-data-grid
          table-data="{{props.tableData.value}}"
          selectable="{{props.selectable.value}}"
          multi-sort="{{props.multiSort.value}}"
          column-reordering-allowed="{{props.columnReorderingAllowed.value}}"
          action-menu="{{props.actionMenu.value}}"
          language="{{props.language.value}}"
          table-actions="{{props.tableActions.value}}"
          action-menu="{{props.actionMenu.value}}"
          columns="{{props.columns.value}}"
          highlight="{{props.highlight.value}}"
          auto-filter="{{props.autoFilter.value}}"
          on-table-action="tableActionListener">
        </px-data-grid>
      </px-demo-component>
      <!-- END Component ------------------------------------------------------>

      <px-demo-component-snippet
          slot="px-demo-component-snippet"
          element-properties="{{props}}"
          element-name="px-data-grid"
          links-includes="[[linksIncludes]]">
      </px-demo-component-snippet>
    </px-demo-interactive>

    <!-- API Viewer -->
    <px-demo-api-viewer api-source-file-path="px-data-grid-api.json" source="px-data-grid"></px-demo-api-viewer>

    <!-- Footer -->
    <px-demo-footer></px-demo-footer>

  </template>

</dom-module>
<script>
  Polymer({
    is: 'px-data-grid-column-demo',
    properties: {
      /**
       * Note: The actual data/values for `props` are placed in `this.demoProps`
       * to create a static reference that Polymer shouldn't overwrite.
       *
       * On object containing all the properties the user can configure for this
       * demo. Usually a pretty similar copy of the component's `properties` block
       * with some additional sugar added to describe what kind of input the
       * user will be shown and how that input should be configured.
       *
       * Note that `value` for each property is the default that will be set
       * unless a config from `configs` is applied by default.
       *
       * @property props
       * @type {Object}
       */
      props: {
        type: Object,
        value: function() {
          return this.demoProps;
        }
      },

      /**
       * An array of pre-configured `props` that can be used to provide the user
       * with a set of common examples. These configs will be made available
       * as a set of tabs the user can click that will automatically change
       * the `props` to specific values.
       *
       * @example
       *
       * Each config is an object. Its keys should be the names of the configurable
       * properties defined in your `demoProps` above. Each key's value should
       * be the new prop value for the configuration. You can also include these
       * optional keys:
       *
       * - `configName` - a String value that will be used for the title of the tab
       * - `configReset` - a Boolean, if `true` resets all props. Defaults to `false`.
       *
       * @property configs
       * @type {Array}
       */
      configs: {
        type: Array,
        value: function() {
          return [
            {
              configName: 'Default',
              configReset: true
            },
            {
              configName: 'More rows (scrollable)',
              configReset: true,
              tableData: [
                {
                  first: 'Elizabeth',
                  last: 'Wong',
                  full: 'Elizabeth Wong',
                  email: 'sika@iknulber.cl',
                  age: 32
                },
                {
                  first: 'Jeffrey',
                  last: 'Hamilton',
                  email: 'cofok@rac.be',
                  age: 23
                },
                {
                  first: 'Alma',
                  last: 'Martin',
                  email: 'dotta@behtam.la',
                  age: 42
                },
                {
                  first: 'Carl',
                  last: 'Saunders',
                  email: 'seh@bibapu.gy',
                  age: 12
                },
                {
                  first: 'Willie',
                  last: 'Dennis',
                  email: 'izko@dahokwej.ci',
                  age: 44
                },
                {
                  first: 'Angel',
                  last: 'Lewis',
                  email: 'ma@et.nz',
                  age: 89
                },
                {
                  first: 'Jessie',
                  last: 'Sherman',
                  email: 'hunocnas@mosuraj.gi',
                  age: 27
                },
                {
                  first: 'Eric',
                  last: 'Brewer',
                  email: 'tu@coajoul.de',
                  age: 88
                },
                {
                  first: 'Cory',
                  last: 'Ramos',
                  email: 'kilamja@oviafbek.ss',
                  age: 9
                },
                {
                  first: 'Bertie',
                  last: 'Ross',
                  email: 'ifuvu@getvi.my',
                  age: 27
                },
                {
                  first: 'Oscar',
                  last: 'Estrada',
                  email: 'minu@kerireg.gp',
                  age: 15
                },
                {
                  first: 'Estelle',
                  last: 'Patton',
                  email: 'hudliami@lijihen.fi',
                  age: 11
                },
                {
                  first: 'Sallie',
                  last: 'George',
                  email: 'wo@zof.bf',
                  age: 33
                },
                {
                  first: 'Harriett',
                  last: 'Wheeler',
                  email: 'woguw@cibevo.pt',
                  age: 52
                },
                {
                  first: 'Bryan',
                  last: 'Houston',
                  email: 'tekkubom@gaahu.ge',
                  age: 77
                },
                {
                  first: 'Leon',
                  last: 'Craig',
                  email: 'wo@gurozo.gs',
                  age: 2
                },
                {
                  first: 'Mable',
                  last: 'Taylor',
                  email: 'um@fegnocka.pg',
                  age: 11
                },
                {
                  first: 'Ida',
                  last: 'Hansen',
                  email: 'lufahu@gewlaskoc.kh',
                  age: 44
                },
                {
                  first: 'Adele',
                  last: 'Thornton',
                  email: 'gugugo@nevigi.th',
                  age: 41
                },
                {
                  first: 'Jerry',
                  last: 'Kelley',
                  email: 'solef@zoose.as',
                  age: 67
                },
                {
                  first: 'Clara',
                  last: 'Delgado',
                  email: 'fivticnuf@upkib.rw',
                  age: 66
                },
                {
                  first: 'Joseph',
                  last: 'Stevenson',
                  email: 'be@viijo.lk',
                  age: 22
                },
                {
                  first: 'Ellen',
                  last: 'Perry',
                  email: 'ce@jewo.sv',
                  age: 23
                },
                {
                  first: 'Ronnie',
                  last: 'Cummings',
                  email: 'iro@wi.vn',
                  age: 17
                },
                {
                  first: 'Olive',
                  last: 'Santos',
                  email: 'vo@nees.cn',
                  age: 99
                },
                {
                  first: 'Rena',
                  last: 'Tucker',
                  email: 'uharoc@lohpol.gl',
                  age: 102
                },
                {
                  first: 'Nell',
                  last: 'Hicks',
                  email: 'felaf@vo.sb',
                  age: 76
                },
                {
                  first: 'Jesus',
                  last: 'Hawkins',
                  email: 'wahgab@mu.mk',
                  age: 34
                },
                {
                  first: 'Duane',
                  last: 'Harris',
                  email: 'kellanjob@daava.ph',
                  age: 23
                },
                {
                  first: 'Jonathan',
                  last: 'Holmes',
                  email: 'jir@bikuf.dj',
                  age: 49
                },
                {
                  first: 'Christine',
                  last: 'Collier',
                  email: 'bocago@jerla.ba',
                  age: 48
                },
                {
                  first: 'Brandon',
                  last: 'Thompson',
                  email: 'regoh@ji.kn',
                  age: 43
                },
                {
                  first: 'Anne',
                  last: 'Dunn',
                  email: 'samhof@are.sc',
                  age: 41
                },
                {
                  first: 'Viola',
                  last: 'Sherman',
                  email: 'wep@kezori.lt',
                  age: 44
                },
                {
                  first: 'Kathryn',
                  last: 'Harper',
                  email: 'keotoci@je.mr',
                  age: 77
                },
                {
                  first: 'Calvin',
                  last: 'Bates',
                  email: 'bomeg@lip.bw',
                  age: 38
                },
                {
                  first: 'Maggie',
                  last: 'Collins',
                  email: 'zonefto@ihihij.ke',
                  age: 35
                },
                {
                  first: 'Zachary',
                  last: 'Mitchell',
                  email: 'wamez@cilvahbod.mk',
                  age: 26
                },
                {
                  first: 'Raymond',
                  last: 'Kelley',
                  email: 'wuz@napujos.tt',
                  age: 21
                },
                {
                  first: 'Augusta',
                  last: 'Torres',
                  email: 'bum@ne.lt',
                  age: 54
                },
                {
                  first: 'Charlie',
                  last: 'Lindsey',
                  email: 'ruhlu@tuobujen.ao',
                  age: 15
                },
                {
                  first: 'Jeremy',
                  last: 'Swanson',
                  email: 'ed@ted.km',
                  age: 21
                },
                {
                  first: 'Joel',
                  last: 'Gonzalez',
                  email: 'ej@pot.bz',
                  age: 18
                },
                {
                  first: 'Lillie',
                  last: 'Hawkins',
                  email: 'uguiv@mudbuve.pa',
                  age: 43
                },
                {
                  first: 'Joel',
                  last: 'Watts',
                  email: 'naafe@oli.bb',
                  age: 1
                },
                {
                  first: 'Isabella',
                  last: 'Sandoval',
                  email: 'asobu@wedef.af',
                  age: 3
                },
                {
                  first: 'Roy',
                  last: 'Lyons',
                  email: 'rasaogu@tadiri.tc',
                  age: 88
                }
              ]
            }
          ];
        }
      },
    },

    /**
     * A reference for `this.props`. Read the documentation there.
     */
    demoProps: {
      tableData: {
        type: Object,
        defaultValue: [
          {
            first: 'Elizabeth',
            last: 'Wong',
            full: 'Elizabeth Wong',
            email: 'sika@iknulber.cl',
            age: 23
          },
          {
            first: 'Jeffrey',
            last: 'Hamilton',
            email: 'cofok@rac.be',
            age: 32
          },
          {
            first: 'Alma',
            last: 'Martin',
            email: 'dotta@behtam.la',
            age: 44
          },
          {
            first: 'Carl',
            last: 'Saunders',
            email: 'seh@bibapu.gy',
            age: 12
          },
          {
            first: 'Willie',
            last: 'Dennis',
            email: 'izko@dahokwej.ci',
            age: 56
          }
        ],
        inputType: 'code:JSON'
      },

      columns: {
        type: Array,
        defaultValue: [
          {
            name: 'Age',
            path: 'age',
            type: 'number',
            width: '50px',
            flexGrow: 0,
            hidden: false
          },
          {
            name: 'Full Name',
            path: 'full',
            hidden: true
          },
          {
            name: 'First Name',
            path: 'first',
            editable: true,
            renderer: 'px-data-grid-string-renderer'
          },
          {
            name: 'Last Name',
            path: 'last'
          },
          {
            name: 'Email',
            path: 'email'
          }
        ],
        inputType: 'code:JSON'
      },

      selectable: {
        type: Boolean,
        defaultValue: false,
        inputType: 'toggle'
      },

      resizable: {
        type: Boolean,
        defaultValue: false,
        inputType: 'toggle'
      },

      multiSort: {
        type: Boolean,
        defaultValue: false,
        inputType: 'toggle'
      },

      actionMenu: {
        type: Boolean,
        defaultValue: false,
        inputType: 'toggle'
      },

      autoFilter: {
        type: Boolean,
        defaultValue: false,
        inputType: 'toggle'
      },

      columnReorderingAllowed: {
        type: Boolean,
        defaultValue: false,
        inputType: 'toggle'
      },

      hideFullName: {
        type: Boolean,
        defaultValue: true,
        inputType: 'toggle'
      },

      freezeFullName: {
        type: Boolean,
        defaultValue: false,
        inputType: 'toggle'
      },

      language: {
        type: String,
        value: 'en',
        inputType: 'dropdown',
        inputChoices: ['en', 'fr', 'fi']
      },

      highlight: {
        type: Array,
        value: [
          {
            type: 'cell',
            condition: (cellContent, column, item) => {
              return cellContent == 'Elizabeth';
            }
          },
          {
            type: 'cell',
            color: '#88F',
            condition: (cellContent, column, item) => {
              return cellContent == 'Dennis';
            }
          }
        ]
      },

      tableActions: {
        type: Object,
        defaultValue: [
          {
            name: 'Export CSV',
            id: 'CSV'
          }
        ],
        inputType: 'code:JSON'
      }
    },

    _fullNameChanged() {
      const grid = this.shadowRoot.querySelector('px-data-grid');
      if (grid && grid.columns) {
        const hidden = this.props.hideFullName.value;
        const frozen = this.props.freezeFullName.value;
        grid.columns.filter(c => c.name == 'Full Name').forEach(c => {
          c.hidden = hidden;
          c.frozen = frozen;
        });
        grid.updateColumns();
      }
    },

    tableActionListener: function(evt) {
      window.alert('Table Action ' + evt.detail.id);
    },

    observers: [
      '_fullNameChanged(props.hideFullName.value, props.freezeFullName.value)'
    ]
  });
</script>
